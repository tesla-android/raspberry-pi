From b86b33081eae9a43d08a67707a45a91b05bff795 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Micha=C5=82=20Gapi=C5=84ski?= <mike@gapinski.eu>
Date: Tue, 21 Jun 2022 20:08:56 +0200
Subject: [PATCH 2/6] Added forced orientation lock
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Change-Id: I9be1cd78f264c18a81be41df200847d02b7c2d71
Signed-off-by: Michał Gapiński <mike@gapinski.eu>
---
 .../core/java/com/android/server/wm/DisplayRotation.java  | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

diff --git a/services/core/java/com/android/server/wm/DisplayRotation.java b/services/core/java/com/android/server/wm/DisplayRotation.java
index bf1671e42287..a48958c9889e 100644
--- a/services/core/java/com/android/server/wm/DisplayRotation.java
+++ b/services/core/java/com/android/server/wm/DisplayRotation.java
@@ -446,13 +446,7 @@ public class DisplayRotation {
         // It's also not likely to rotate a TV screen.
         final boolean isTv = mContext.getPackageManager().hasSystemFeature(
                 PackageManager.FEATURE_LEANBACK);
-        mDefaultFixedToUserRotation =
-                (isCar || isTv || mService.mIsPc || mDisplayContent.forceDesktopMode()
-                        || !mDisplayContent.shouldRotateWithContent())
-                // For debug purposes the next line turns this feature off with:
-                // $ adb shell setprop config.override_forced_orient true
-                // $ adb shell wm size reset
-                && !"true".equals(SystemProperties.get("config.override_forced_orient"));
+        mDefaultFixedToUserRotation = true;
     }
 
     void applyCurrentRotation(@Surface.Rotation int rotation) {
-- 
2.34.1

